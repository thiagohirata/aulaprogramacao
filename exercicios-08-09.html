<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/prism.css"  />
	<link rel="stylesheet" href="css/codemirror.css"  />
  <link rel="stylesheet" href="css/laboratorio.css"  />
	<title>Exercícios - Aulas 8-9</title>
</head>
<body>
	<nav class="navbar navbar-default navbar-static-top">
		<div class="container-fluid">
			<a class="navbar-brand" href="index.html">TPG 2016</a>
			<div class="pull-right">
				<p class="navbar-text userdata hidden"><span class="username">{nome}</span> <small>(<a href="#" class="onclick-logout">sair</a>)</small></p>
			</div>
		</div>
	</nav>

<div class="container-fluid">
  <h1>Exercícios - Aulas 8-9</h1>




	<section>
		<h2>Exercício 08-01</h2>
		<div class="example">
	        <pre class="hidden"><code class="language-javascript ">var WIDTH = 500; var HEIGHT = 500;
size(WIDTH, HEIGHT);
var SPEED = 5;

var jogador1 = {
centro: [ 250, 250 ],
velocidade: [0 , 0],
raio: 10,
pontos : 0
};

var moedas = [
{
	  centro: [ 300, 300 ],
	  raio: 5
},
{
	  centro: [ 100, 100 ],
	  raio: 5
}
];

function colide (c1, c2) {
//teorema de pitágoras!
var d = Math.sqrt ( Math.pow(c1.centro[0] - c2.centro[0], 2) + Math.pow(c1.centro[1] - c2.centro[1], 2));
return d < c1.raio + c2.raio;
}

void draw() {
background(100);
if(Input.left) {
	  jogador1.centro[0]-=SPEED;
} else if(Input.right) {
	  jogador1.centro[0]+=SPEED;
}
if(Input.up) {
	  jogador1.centro[1]-=SPEED;
} else if(Input.down) {
	  jogador1.centro[1]+=SPEED;
}

fill(255,255,255);
ellipse(jogador1.centro[0], jogador1.centro[1], jogador1.raio * 2, jogador1.raio * 2);
for(var i = 0; i < moedas.length; i++) {
	  var moeda = moedas[i];
	  fill(255,255,0);
	  ellipse(moeda.centro[0], moeda.centro[1], moeda.raio * 2, moeda.raio * 2);
	  if(colide(moeda, jogador1)) {
		  jogador1.pontos++;
		  moedas[i] = {
			  centro: [ Math.random() * 500, Math.random() * 500],
			  raio: Math.random() * 10 + 5
		  };
	  }
}
text(jogador1.pontos, 10, 10);
}
</code></pre><canvas class="center-block"></canvas>
	    </div>
	  <hr></hr>
    <div class="row laboratorio" codeid="aula08-ex01">
      <div class="col-sm-8">
        <div class="form-group ">
          <textarea class="form-control" rows="16" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">var WIDTH = 500; var HEIGHT = 500;
size(WIDTH, HEIGHT);

var jogador1 = {
	centro: [ 250, 250 ],
	velocidade: [0 , 0],
	raio: 10,
	pontos: 0
};

var moedas = [
	{
		centro: [ 300, 300 ],
		raio: 5
	},
	{
		centro: [ 100, 100 ],
		raio: 5
	}
];

function colide (c1, c2) {
	//??
	return false;
}

void draw() {
	background(100);
	if(Input.left) {
		//??
	} else if(Input.right) {
		//??
	}
	if(Input.up) {
		//??
	} else if(Input.down) {
		//??
	}

	fill(255,255,255);
	ellipse(jogador1.centro[0], jogador1.centro[1], jogador1.raio * 2, jogador1.raio * 2);
	for(var i = 0; i < moedas.length; i++) {
		var moeda = moedas[i];
		fill(255,255,0);
		ellipse(moeda.centro[0], moeda.centro[1], moeda.raio * 2, moeda.raio * 2);
		if(colide(moeda, jogador1)) {
			//??
		}
	}
	text(jogador1.pontos, 10, 10);
}</textarea>
        </div>
        <div class="form-group">
          <button class="btn btn-primary btn-block execute">Executar</button>
        </div>
        <div class="alert alert-danger messagecontainer" style="display:none;"></div>
      </div>
      <div class="col-sm-4">
        <canvas  class="img-responsive"></canvas>
      </div>
    </div>
  </section>

  <section>
	  <h2>Exercício 08-02</h2>
	  <div class="example">
		  <pre class="hidden"><code class="language-javascript ">var WIDTH = 500; var HEIGHT = 500;
size(WIDTH, HEIGHT);

var circulo1 = {
  centro: [ 250, 0 ],
  velocidade: [0 , 0],
  raio: 5
};

var circulo2 = {
  centro: [ 250, 400 ],
  raio: 15
};

function colide (c1, c2) {
  //teorema de pitágoras!
  var d = Math.sqrt ( Math.pow(c1.centro[0] - c2.centro[0], 2) + Math.pow(c1.centro[1] - c2.centro[1], 2));
  return d < c1.raio + c2.raio;
}

void draw() {
  background(100);
  circulo1.centro[1] += circulo1.velocidade[1];
  circulo1.velocidade[1] += 1;

  if(colide(circulo1, circulo2)) {
	  circulo1.velocidade[1] = -25;
  }
  ellipse(circulo2.centro[0], circulo2.centro[1], circulo2.raio * 2, circulo2.raio * 2);
  ellipse(circulo1.centro[0], circulo1.centro[1], circulo1.raio * 2, circulo1.raio * 2);

}
  </code></pre><canvas class="center-block"></canvas>
	  </div>
	<hr></hr>
  <div class="row laboratorio" codeid="aula08-ex02">
	<div class="col-sm-8">
	  <div class="form-group ">
		<textarea class="form-control" rows="16" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">var WIDTH = 500; var HEIGHT = 500;
size(WIDTH, HEIGHT);

var circulo1 = {
  centro: [ 250, 0 ],
  velocidade: [0 , 0],
  raio: 5
};

var circulo2 = {
  centro: [ 250, 400 ],
  raio: 15
};

void draw() {
  background(100);
  circulo1.centro[1] += circulo1.velocidade[1];
  circulo1.velocidade[1] += 1;

  ellipse(circulo2.centro[0], circulo2.centro[1], circulo2.raio * 2, circulo2.raio * 2);
  ellipse(circulo1.centro[0], circulo1.centro[1], circulo1.raio * 2, circulo1.raio * 2);

}</textarea>
	  </div>
	  <div class="form-group">
		<button class="btn btn-primary btn-block execute">Executar</button>
	  </div>
	  <div class="alert alert-danger messagecontainer" style="display:none;"></div>
	</div>
	<div class="col-sm-4">
	  <canvas  class="img-responsive"></canvas>
	</div>
  </div>
  </section>




  <section>
	  <h2>Exercício 09-01</h2>
	  <div class="example">
		  <pre class="hidden"><code class="language-javascript ">size(500,500);
frameRate(30);
var SQUARE_SIZE = 50;
var tabuleiro = [[0,0,0,0,0,0,0,0,0,0],
                 [0,0,1,0,0,0,0,1,0,0],
                 [0,0,1,1,0,0,0,1,1,0],
                 [0,0,0,0,0,0,0,1,0,0],
		 [0,0,1,0,1,1,1,1,1,0],
		 [0,0,1,0,0,0,0,0,1,0],
		 [0,0,1,0,1,1,1,1,1,0],
                 [0,0,1,0,0,0,0,0,0,0]];
var startingPosition = [ 5, 2 ];
var fronteira = [ startingPosition ];

var goalPosition     = [ 9, 5];
//vai guardar o caminho na ordem
var caminho   = [];

var espacoAnterior = {};
espacoAnterior[startingPosition] = [-1, -1];

function buscarVizinhos(pos) {
	//candidatos são as posições vizinhas de pos
	var candidatos = [
			[pos[0]-1, pos[1]],
			[pos[0]+1, pos[1]],
			[pos[0], pos[1]-1],
			[pos[0], pos[1]+1]
	];
	var vizinhos   = [];
	//adiciona a vizinhos os candidatos válidos
	for(var i = 0; i < candidatos.length; i++) {
		if(tabuleiro[candidatos[i][1]] != undefined
		   && tabuleiro[candidatos[i][1]][candidatos[i][0]] == 0) {
			vizinhos.push(candidatos[i]);
		}
	}
	return vizinhos;
}

while(fronteira.length > 0 &amp;&amp; caminho.length == 0) {
	var posicaoAtual = fronteira.shift();
	var vizinhos = buscarVizinhos(posicaoAtual);
	for(var i = 0; i < vizinhos.length; i++) {
		var vizinho = vizinhos[i];

		if(espacoAnterior[vizinho] == undefined) {
			espacoAnterior[vizinho] = posicaoAtual;
			fronteira.push(vizinho);
		}

		//verifica se vizinho está no local certo
		if(vizinho[0] == goalPosition[0]
			&& vizinho[1] == goalPosition[1] ) {
			//CHEGUEI !!!
			for (var c = vizinho; c != undefined; c = espacoAnterior[c]) {
				caminho.push(c);
			}
			caminho.reverse();
			caminho.shift();
		}

	}
}

var jogador = {
	posicao: [ 5, 2 ],
	caminho: caminho
};

void draw() {
	background(100);
	for(var y = 0; y < tabuleiro.length; y++) {
		for(var x = 0; x < tabuleiro[y].length; x++) {
			strokeWeight(1); //linha fina
			stroke(0,0,0); //linha preta
			if(tabuleiro[y][x] == 1) {
				fill(50);
			} else {
				fill(255);
			}
			rect(x * SQUARE_SIZE, y * SQUARE_SIZE, SQUARE_SIZE, SQUARE_SIZE);
		}
	}

	//move o jogador em direção ao próximo quadrado
	if(jogador.caminho.length > 0) {
		if(Math.abs(jogador.posicao[0] - jogador.caminho[0][0]) < 0.09
		 &amp;&amp; Math.abs(jogador.posicao[1] - jogador.caminho[0][1]) < 0.09) {
			//jogador chegou no próximo ponto!
			//Tira o próximo item do caminho
			var novaposicao = jogador.caminho.shift();
			jogador.posicao[0] = novaposicao[0];
			jogador.posicao[1] = novaposicao[1];
		}
		if(jogador.caminho.length > 0) {
			//move para a esquerda ou direita
			if(jogador.posicao[0] > jogador.caminho[0][0]) jogador.posicao[0]-= 0.1;
			else if(jogador.posicao[0] < jogador.caminho[0][0]) jogador.posicao[0] += 0.1;
			if(jogador.posicao[1] > jogador.caminho[0][1]) jogador.posicao[1]-= 0.1;
			else if(jogador.posicao[1] < jogador.caminho[0][1]) jogador.posicao[1]+= 0.1;
		}
	}

	//desenha posição inicial
	fill(255,0,0);
	noStroke();
	ellipse((startingPosition[0] + 0.5) * SQUARE_SIZE , (startingPosition[1] + 0.5)  * SQUARE_SIZE , SQUARE_SIZE * 0.8, SQUARE_SIZE * 0.8);

	//desenha posição final
	fill(0,255,0);
	noStroke();
	ellipse((goalPosition[0] + 0.5) * SQUARE_SIZE , (goalPosition[1] + 0.5)  * SQUARE_SIZE , SQUARE_SIZE * 0.8, SQUARE_SIZE * 0.8);


	//desenha o jogador!
	fill(255,255,0);
	stroke(0,0,0);
	ellipse((jogador.posicao[0] + 0.5) * SQUARE_SIZE , (jogador.posicao[1] + 0.5)  * SQUARE_SIZE , SQUARE_SIZE * 0.8, SQUARE_SIZE * 0.8);


}</code></pre><canvas class="center-block"></canvas>
	  </div>
	<hr></hr>
  <div class="row laboratorio" codeid="aula09-ex01">
	<div class="col-sm-8">
	  <div class="form-group ">
		<textarea class="form-control" rows="16" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">size(500,500);
frameRate(30);
var SQUARE_SIZE = 50;
var tabuleiro = [[0,0,0,0,0,0,0,0,0,0],
                 [0,0,1,0,0,0,0,1,0,0],
                 [0,0,1,1,0,0,0,1,1,0],
                 [0,0,0,0,0,0,0,1,0,0],
				 [0,0,1,0,1,1,1,1,1,0],
				 [0,0,1,0,0,0,0,0,1,0],
				 [0,0,1,0,1,1,1,1,1,0],
                 [0,0,1,0,0,0,0,0,0,0]];
var startingPosition = [ 5, 2 ];
var fronteira = [ startingPosition ];

var goalPosition     = [ 9, 5];
//vai guardar o caminho na ordem
var caminho   = [];

var espacoAnterior = {};
espacoAnterior[startingPosition] = [-1, -1];

function buscarVizinhos(pos) {
	//candidatos são as posições vizinhas de pos
	var candidatos = [
			[pos[0]-1, pos[1]],
			[pos[0]+1, pos[1]],
			[pos[0], pos[1]-1],
			[pos[0], pos[1]+1]
	];
	var vizinhos   = [];
	//adiciona a vizinhos os candidatos válidos
	for(var i = 0; i < candidatos.length; i++) {
		if(tabuleiro[candidatos[i][1]] != undefined
		   && tabuleiro[candidatos[i][1]][candidatos[i][0]] == 0) {
			vizinhos.push(candidatos[i]);
		}
	}
	return vizinhos;
}

//while(fronteira.length > 0 && caminho.length == 0) {
//}

var jogador = {
	posicao: [ 5, 2 ],
	caminho: caminho
};

void draw() {
	background(100);
	for(var y = 0; y < tabuleiro.length; y++) {
		for(var x = 0; x < tabuleiro[y].length; x++) {
			strokeWeight(1); //linha fina
			stroke(0,0,0); //linha preta
			if(tabuleiro[y][x] == 1) {
				fill(50);
			} else {
				fill(255);
			}
			rect(x * SQUARE_SIZE, y * SQUARE_SIZE, SQUARE_SIZE, SQUARE_SIZE);
		}
	}

	//move o jogador em direção ao próximo quadrado
	if(jogador.caminho.length > 0) {
		if(Math.abs(jogador.posicao[0] - jogador.caminho[0][0]) < 0.09
		 && Math.abs(jogador.posicao[1] - jogador.caminho[0][1]) < 0.09) {
			//jogador chegou no próximo ponto!
			//Tira o próximo item do caminho
			var novaposicao = jogador.caminho.shift();
			jogador.posicao[0] = novaposicao[0];
			jogador.posicao[1] = novaposicao[1];
		}
		if(jogador.caminho.length > 0) {
			//move para a esquerda ou direita
			if(jogador.posicao[0] > jogador.caminho[0][0]) jogador.posicao[0]-= 0.1;
			else if(jogador.posicao[0] < jogador.caminho[0][0]) jogador.posicao[0] += 0.1;
			if(jogador.posicao[1] > jogador.caminho[0][1]) jogador.posicao[1]-= 0.1;
			else if(jogador.posicao[1] < jogador.caminho[0][1]) jogador.posicao[1]+= 0.1;
		}
	}

	//desenha posição inicial
	fill(255,0,0);
	noStroke();
	ellipse((startingPosition[0] + 0.5) * SQUARE_SIZE , (startingPosition[1] + 0.5)  * SQUARE_SIZE , SQUARE_SIZE * 0.8, SQUARE_SIZE * 0.8);

	//desenha posição final
	fill(0,255,0);
	noStroke();
	ellipse((goalPosition[0] + 0.5) * SQUARE_SIZE , (goalPosition[1] + 0.5)  * SQUARE_SIZE , SQUARE_SIZE * 0.8, SQUARE_SIZE * 0.8);

	//desenha o jogador!
	fill(255,255,0);
	stroke(0,0,0);
	ellipse((jogador.posicao[0] + 0.5) * SQUARE_SIZE , (jogador.posicao[1] + 0.5)  * SQUARE_SIZE , SQUARE_SIZE * 0.8, SQUARE_SIZE * 0.8);


}</textarea>
	  </div>
	  <div class="form-group">
		<button class="btn btn-primary btn-block execute">Executar</button>
	  </div>
	  <div class="alert alert-danger messagecontainer" style="display:none;"></div>
	</div>
	<div class="col-sm-4">
	  <canvas  class="img-responsive"></canvas>
	</div>
  </div>
  </section>

</div>

<script src="https://www.gstatic.com/firebasejs/3.1.0/firebase.js"></script>
<script src="https://www.gstatic.com/firebasejs/ui/live/0.4/firebase-ui-auth.js"></script>
<script src="js/jquery-3.0.0.min.js"></script>
<script src="js/prism.js" data-manual></script>
<script src="js/processing.min.js"></script>
<script src="js/codemirror.js"></script>
<script src="js/codemirror/mode/javascript/javascript.js"></script>
<script src="js/laboratorio.js"></script>
<script src="js/appsetup.js"></script>
<script>

//captura de Input
var Input = {
	space: false,
	up: false,
	down: false,
	left: false,
	right: false
};
document.onkeydown = function(evt) {
		switch(evt.keyCode){
				case 37: Input.left = true; break;
				case 38: Input.up = true; break;
				case 39: Input.right = true; break;
				case 40: Input.down = true; break;
				case 32: Input.space = true; break;
		}
};
document.onkeyup = function(evt) {
		switch(evt.keyCode){
				case 37: Input.left = false; break;
				case 38: Input.up = false; break;
				case 39: Input.right = false; break;
				case 40: Input.down = false; break;
				case 32: Input.space = false; break;
		}
};
</script>
</body>
</html>
